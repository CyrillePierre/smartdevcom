\chapter{Mise en place du protocole de communication}
	Le premier chapitre de se rapport a présenté les principales idées que l'on souhaite mettre en 
	place pour avoir une architecture d'objets dynamique et générique. On va maintenant s'intéresser
	à la manière dont on peut les réaliser.


\section{Les protocoles existants}
	Il existe une multitude
	% A ECRIRE, A ECRIRE	, A ECRIRE, A ECRIRE, A ECRIRE, A ECRIRE

	\subsection{Zigbee}
	% A ECRIRE, A ECRIRE	, A ECRIRE, A ECRIRE, A ECRIRE, A ECRIRE
	\subsection{Z-Wave}
	% A ECRIRE, A ECRIRE	, A ECRIRE, A ECRIRE, A ECRIRE, A ECRIRE
	\subsection{Alljoyn}
	% A ECRIRE, A ECRIRE	, A ECRIRE, A ECRIRE, A ECRIRE, A ECRIRE
	
	% IMPORTANT : explication de pourquoi on a pas pris un protocole existant :
	%  - ne correspond pas forcément à toute les fonctionnalités que l'on souhaite mettre en place
	%  - est difficilement adaptable avec les outils que l'on a (mbed, attiny, bluetooth Bolutek)

\section{Le réseau virtuelle}
	Nous allons maintenant nous intéresser aux caractéristiques du protocole qui a été
	développé dans ce projet. L'un des points clés de la mise en place d'objets pour la domotique 
	est la communication avec ceux-ci. Ces objets doivent en effet être "connectés" pour que l'on
	puisse les contrôler ou recevoir des messages de leur part. Il est donc nécessaire de mettre en 
	place une architecture réseau qui puisse lier ces objets de façon efficace. Mais la mise en place
	de ce réseau n'est pas forcément évidente. Si l'on souhaite être indépendant du support de 
	communication, il faut mettre en place des moyens de lier des objets de supports différents. Il 
	est également possible de communiquer avec des objets mobiles. Cela signifie que l'architecture 
	du réseau doit également être dynamique. C'est pourquoi il est indispensable d'avoir un protocole
	capable de gérer tous ces détails.
	
	\subsection{Architecture du réseau}
% 		définition d’un réseau (uniquement 1 support de communication)
% 		description de la connexion des réseaux
% 		exemples d’architecture de réseau virtuel
		Pour bien comprendre comment est structuré un réseau d'objets, il faut d'abord s'intéresser 
		à une architecture simple ne faisant qu'intervenir un seul support de communication. La figure
		\ref{netStar} représente un réseau créé par des objets connectés possédant une interface Wifi.
		En utilisant du Wifi \emph{Point d'Accès}, un des objets fait office de serveur (\emph{C}) 
		sur lequel les autres objets clients viendront se connecter. Avec cette architecture de 
		réseau, l'ensemble des objets peuvent parler entre eux mais tous les messages passent par 
		\emph{C}. Cette connexion est complètement transparente à l'utilisation puisqu'elle 
		directement gérée par le protocole IP. La communication consistera simplement à créer une
		\emph{socket} TCP ou UDP entre deux objets. Ils pouront alors parler sans avoir à s'occuper
		du transport de leurs messages.
		
		\begin{figure}[!ht]
         \centering
         \includegraphics[width=.8\textwidth]{img/reseau_etoile.png}
         \caption{Exemple d'architecture réseau d'un point d'accès Wifi (architecture en étoile).}
         \label{netStar}
      \end{figure}

      Si l'on prend cette fois-ci l'exemple d'une architecture formée par d'objets utilisant 
      ZigBee (figure \ref{netGraph}), on remarque que les objets ne sont pas lié à un unique objet
      mais à l'ensemble des objets qui sont à sa portée. Un objet peut donc communiquer directement
      avec un objet voisin mais également avec des objets plus distants s'il existe un chemin dans
      le graphe du réseau. Encore une fois, toute cette architecture est déjà gérée nativement par
      les composants ZigBee. Cependant son utilisation est un peu différente d'une utilisation 
		d'objets en Wifi. Certains protocoles de communication utilisant du ZigBee (par exemple Xbee) 
		ne permettent pas d'envoyer des messages à une cible précise. C'est la totalité des objets qui
		sont présent dans le réseau ZigBee qui recevront le message. Cela signifie qu'il faudra gérer
		la cible dans le message en lui-même. Cette méthode peut être un inconvénient puisqu'il
		complexifie la création des messages mais il offre un avantage au niveau du transport de ces
		messages.
      
      \begin{figure}[!ht]
         \centering
         \includegraphics[width=.8\textwidth]{img/reseau_graphe.png}
         \caption{Exemple d'architecture réseau d'objet en ZigBee (architecture maillée).}
         \label{netGraph}
      \end{figure}
      
      Ces deux architectures sont les plus courantes dans les technologies de communication sans
      fils. Certaines de ces technologies offrent même la possibilité de choisir quelle 
		architecture on souhaite utiliser. En domotique, la plupart des produits proposés dans le
		marché utilise une architecture maillée car elle est la plus adaptée aux tailles des maisons.
		Mais souvent, ces produits nous limitent à l'utilisation d'une même technologie de 
		communication pour tous les objets de la maison (et également de la même marque). Ceci peut
		être problématique lorsque l'on souhaite ajouter dans le réseau un objet connecté que l'on
		aurait fabriqué nous même. En effet, certains de ces produits utilisent des technologies assez
		onéreuses. Une façon de résoudre ce problème est de ne pas limiter le réseau à un unique
		support de communication mais à mettre en place des outils permettant de connecter entre eux
		différents supports.
      
	\subsection{Le routage}
% 		présentation du protocole VIP
% 		explication du transfert d’un message d’un support à un autre
% 		exemple concret d’un envoi de message
	\subsection{Un réseau dynamique}
% 		apparition, disparition ou déplacement d’objets dans le réseau
% 		présentation du protocole VARP
% 		exemple d’apparition d’un objet
% 		les objets mobiles

\section{La généricité des objets connectés}
% 	explication de l’intérêt de classifier les actions
	\subsection{Méthode de classification des actions sur les objets}
% 		recherche des informations caractérisant les actions
% 		algorithmes de classification
	\subsection{La structure actuelle}
% 		explication du choix de la hiérarchie actuelle d’actions
% 		les limites et les défauts de cette hiérarchie
	\subsection{Gestion dynamique d’objets inconnus}
% 		comment un objet d’un nouveau type peut s’intégrer à la hiérarchie
% 		les différentes solutions d’intégration
% 		exemple

