\chapter{La création des objets}

\section{Reconnaissance vocale : Application Android}
	\subsection{Etat de l’art}
	
	Tout projet implique une phase de recherche, afin d'effectuer un état de l'art sur ce qu'il a déjà été fait auparavant dans ce domaine.
Afin de rechercher ce qu'il fallait pour cet état de l'art, il a donc fallu décomposer en plusieurs parties ce que devait réellement réaliser cette reconnaissance. Ces parties étaient :
\begin{itemize}
\item Activation de la reconnaissance vocale automatiquement
\item Gestion de la chaine de caractères comprise par la reconnaissance
\end{itemize}

De base sur Android, il est possible d'activer la reconnaissance vocale automatiquement grâce aux mots clefs « OK Google ». Souhaitant appeler notre intelligence domotique Jarvis, il était peu souhaitable de dire ces mots afin d'activer la reconnaissance.
Après recherches, il s'avère qu'il n'existe aucun moyen simple de changer ces mots clefs, puisque les seuls moyens sont soit d'avoir un téléphone rooté, autrement dit où l'on a tous les accès afin de changer le bon fichier de configuration. Soit d'avoir un téléphone de la marque Motorola, qui intègre le changement de ces mots directement dans son firmware. C'est pourquoi pour activer la reconnaissance vocale, nous sommes obligés de prononcer les mots « OK Google ».
	
	\subsection{Activation de la reconnaissance vocale}
	
Afin de pouvoir démarrer et utiliser la reconnaissance vocale, il faut un ensemble d'éléments :
\begin{itemize}
 \item Autovoice
 \item Tasker
\end{itemize}

Autovoice est une application Android qui permet d'utiliser la reconnaissance vocale de Google, et de se servir de la chaîne de caractères reconnues pour en faire ce que l'on souhaite. Par ailleurs, on peut la paramétrer de telle sorte qu'elle réagise seulement si une suite de mots clefs est reconnue. Afin de pouvoir communiquer avec Jarvis, le seul mot clef choisi a donc été son nom. Du côté de Tasker, c'est une application d'automatisation très connue sur Android. Elle permet de réaliser des tâches en réponse à un événement donné. Ainsi il est possible d'utiliser comme événement Autovoice, et comme tâche, une application qui permet de traiter la chaîne de caractères : SpeechRecognition.

	\subsection{SpeechRecognition}
	
SpeechRecognition (SP) est une application Android qui permet donc d'interpréter une chaîne de caractères, et d'envoyer une trame suivant le protocole SDCP au bon objet connecté. l'application possède une base de données comportant chaque requête que l'on peut réaliser :

\begin{lstlisting}[frame=single]
<data name="allumer_lumiere">
    <voice_activation>allume la lumiere</voice_activation>
    <voice_diction>j'allume la lumiere</voice_diction>
    <code_bluetooth>2</code_bluetooth>
    <ble_name>SDC_Homer</ble_name>
</data>
\end{lstlisting}

Ainsi une requête est caractérisée par une chaîne de caractères à reconnaître, une chaîne de caractères à dire par synthèse vovale, afin de donner un feedback sur ce qu'il se passe à l'utilisateur. Un code bluetooth, caractéristique de la requête à effectuer, et pour finir le nom de l'objet bluetooth sur lequel il faut se connecter pour réaliser la requête.

La première chose a faire est de reconnaître quelle requête l'utilisateur souhaite réaliser. Pour ce faire, l'application réalise un algorithme sur la chaîne reçue dont le but est d'évaluer la distance avec l'ensemble des chaînes à reconnaitre dans la base de données. La distance minimale caractérisera la requête faite par l'utilisateur. Il existe différents algorithmes : Levenshtein, JaroWinkler, et Fuzzy. 

La distance de Levenshtein est la plus simple des 3. Celle-ci calcule le nombre de différences qu'il y a entre deux chaînes de caractères. Ces différences peuvent être le remplacement, la suppression, ou l'insertion d'un caractère.

Pour la distance de JaroWinkler, est une variante de la distance de Jaro dont l'équation est:
\begin{equation}
 d = \frac{1}{3}(\frac{m}{|s1|}+\frac{m}{|s2|}+\frac{m-t}{m})
\end{equation}

où :
\begin{itemize}
 \item $|s_i|$ est la longueur de la chaîne de caractères de la chaîne 'i'
 \item $m$ est le nombre de caractères identiques dans les 2 chaînes
 \item $t$ est le nombre de transpositions nécessaires de ces caractères partagés
\end{itemize}

Pour finir il existe la distance Fuzzy, celle-ci permet d'évaluer le nombre de correspondance entre 2 chaînes, ainsi un point est donné pour chaque caractère en commun dans les 2 chaines, et deux points s'il y a une séquence de caractères. La formule est : 


	\subsection{Communiquer avec les protocoles BLE et WiFi}
\section{Les actionneurs}
\section{Les capteurs}


